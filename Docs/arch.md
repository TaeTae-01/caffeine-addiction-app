# CaffeineTracker Web - 설계 문서

## 1. 시스템 아키텍처

### 1.1 전체 구조

- **Frontend Only**: React.js 기반 SPA (Single Page Application)
- **데이터 저장**: LocalStorage를 활용한 클라이언트 사이드 저장
- **상태 관리**: Context API + React Query
- **스타일링**: Tailwind CSS + CSS Modules
- **빌드 도구**: Vite

### 1.2 주요 아키텍처 패턴

- **컴포넌트 기반 설계**: 재사용 가능한 UI 컴포넌트
- **Context Pattern**: 전역 상태 관리
- **Custom Hooks**: 비즈니스 로직 분리
- **Presentational/Container Components**: 관심사 분리

## 2. 데이터 모델

### 2.1 사용자 프로필

```javascript
{
  id: string,
  name: string,
  email: string,
  age: number,
  weight: number,
  gender: 'male' | 'female' | 'other',
  dailyLimit: number, // 계산된 일일 권장량
  preferences: {
    theme: 'light' | 'dark' | 'system',
    notifications: boolean
  }
}
```

### 2.2 카페인 로그

```javascript
{
  id: string,
  timestamp: ISO8601,
  category: 'coffee' | 'energyDrink',
  brand: string,
  item: string,
  size: string | null,
  caffeineAmount: number,
  remainingAmount: number // 실시간 계산
}
```

### 2.3 카페인 데이터베이스

- 커피: 4개 브랜드 (스타벅스, 메가커피, 컴포즈커피, 빽다방)
- 에너지드링크: 3개 브랜드 (몬스터, 레드불, 핫식스)
- 각 브랜드별 2-3개 주요 음료
- 커피는 S/M/L 사이즈별 카페인 함량 차등

## 3. 핵심 기능 설계

### 3.1 실시간 카페인 추적

- **반감기 적용**: 5.5시간 기준 지수 감소
- **자동 업데이트**: 1분 간격 재계산
- **시각화**: 프로그래스 바와 수치 표시

### 3.2 계층적 선택 시스템

```
1단계: 카테고리 (커피/에너지드링크)
2단계: 브랜드 선택
3단계: 음료 선택
4단계: 사이즈 선택 (커피만 해당)
```

### 3.3 개인 맞춤 권장량

- 체중 기반: 1kg당 5.5mg (최대 400mg)
- 나이 조정: 18세 미만 50%, 65세 이상 80%
- 성별 조정: 여성 90%
- 특수 상황: 임신/수유 시 최대 200mg

### 3.4 데이터 시각화

- **현재 상태**: 원형/선형 프로그래스 바
- **일일 추이**: 라인 차트
- **주간 통계**: 바 차트
- **카테고리별 분석**: 파이 차트

## 4. 화면 구성

### 4.1 메인 화면 (Home)

- 현재 카페인 수치 대시보드
- 빠른 추가 버튼 (즐겨찾기)
- 최근 섭취 내역 (3-5개)
- 경고 상태 표시

### 4.2 카페인 추가 화면

- 계층적 선택 UI
- 선택 단계별 시각적 피드백
- 카페인 함량 미리보기
- 추가 확인 애니메이션

### 4.3 프로필 화면

- 기본 정보 입력/수정
- 일일 권장량 자동 계산
- 특수 상황 설정
- 데이터 내보내기/가져오기

### 4.4 기록 화면

- 일별 섭취 기록 목록
- 시간대별 그래프
- 필터링 옵션 (기간, 카테고리)
- 통계 요약

### 4.5 설정 화면

- 테마 설정 (라이트/다크/시스템)
- 알림 설정
- 데이터 관리 (초기화, 백업)
- 앱 정보

## 5. 컴포넌트 구조

### 5.1 Layout Components

- `App`: 최상위 컴포넌트
- `Layout`: 헤더, 네비게이션 포함
- `PageTransition`: 페이지 전환 애니메이션

### 5.2 Feature Components

- `CaffeineProgressBar`: 카페인 수치 시각화
- `CaffeineSelector`: 계층적 선택 컴포넌트
- `ProfileForm`: 사용자 정보 폼
- `CaffeineChart`: 차트 컴포넌트
- `ThemeToggle`: 테마 전환 버튼

### 5.3 Common Components

- `Button`: 범용 버튼
- `Card`: 카드 레이아웃
- `Modal`: 모달 다이얼로그
- `Toast`: 알림 메시지
- `LoadingSpinner`: 로딩 표시

## 6. 상태 관리 전략

### 6.1 전역 상태 (Context API)

- `AuthContext`: 사용자 인증 상태
- `ThemeContext`: 테마 설정
- `CaffeineContext`: 카페인 데이터

### 6.2 로컬 상태

- 폼 입력값
- UI 토글 상태
- 임시 선택값

### 6.3 캐시 전략 (React Query)

- 카페인 로그: 1분 캐시
- 사용자 프로필: 5분 캐시
- 통계 데이터: 10분 캐시

## 7. 성능 최적화 방안

### 7.1 코드 최적화

- 코드 스플리팅 (라우트 기반)
- 컴포넌트 메모이제이션
- 불필요한 리렌더링 방지

### 7.2 자원 최적화

- 이미지 최적화 (WebP, lazy loading)
- 번들 크기 최소화
- Tree shaking

### 7.3 런타임 최적화

- Virtual scrolling (긴 목록)
- Debounce/Throttle 적용
- Web Workers 활용 검토

## 8. PWA 구현

### 8.1 오프라인 지원

- Service Worker 구현
- 캐시 전략 수립
- 오프라인 상태 UI

### 8.2 설치 가능

- Web App Manifest
- 홈 화면 추가 프롬프트
- 독립 실행 모드

### 8.3 기기 기능

- 알림 권한 요청
- 백그라운드 동기화
- 앱 업데이트 알림

## 9. 테마 시스템

### 9.1 테마 구성

- 라이트 모드: 밝은 배경, 어두운 텍스트
- 다크 모드: 어두운 배경, 밝은 텍스트
- 시스템 연동: OS 테마 자동 감지

### 9.2 색상 팔레트

- Primary: 보라색 계열 (#8B5CF6)
- Secondary: 청록색 계열 (#06B6D4)
- Caffeine: 갈색 계열 (#8B4513)
- 상태 색상: 성공(녹색), 경고(노란색), 위험(빨간색)

### 9.3 전환 효과

- 부드러운 색상 전환
- 시스템 테마 변경 감지
- 사용자 선호도 저장

## 10. 접근성 고려사항

### 10.1 웹 접근성

- WCAG 2.1 Level AA 준수
- 키보드 네비게이션 완벽 지원
- 스크린 리더 호환성

### 10.2 사용성

- 큰 터치 타겟 (최소 44x44px)
- 명확한 포커스 표시
- 고대비 모드 지원

### 10.3 다국어 지원 준비

- 텍스트 외부화
- RTL 레이아웃 고려
- 날짜/숫자 포맷 현지화

## 11. 보안 및 프라이버시

### 11.1 데이터 보안

- 모든 데이터는 로컬 저장
- 민감한 정보 미수집
- HTTPS 배포 필수

### 11.2 입력 검증

- 클라이언트 사이드 유효성 검사
- XSS 방지
- 데이터 타입 검증

### 11.3 프라이버시

- 외부 추적 스크립트 미사용
- 개인정보 처리 방침 명시
- 데이터 삭제 기능 제공

## 12. 개발 로드맵

### Phase 1: MVP (2주)

- 기본 UI/UX 구현
- 카페인 추가/추적 기능
- 로컬 데이터 저장

### Phase 2: 핵심 기능 (2주)

- 계층적 선택 시스템 완성
- 실시간 카페인 감소
- 프로필 관리

### Phase 3: 고급 기능 (2주)

- 데이터 시각화
- PWA 구현
- 테마 시스템

### Phase 4: 최적화 (1주)

- 성능 최적화
- 접근성 개선
- 버그 수정

## 13. 기술적 의사결정

### 13.1 React vs 다른 프레임워크

- React 선택 이유: 생태계, 커뮤니티, 유연성
- Hooks 기반 현대적 패턴
- 풍부한 라이브러리 지원

### 13.2 상태 관리

- Context API 선택: 간단하고 충분한 기능
- Redux 불필요: 앱 규모에 과도함
- React Query: 서버 상태 관리에 특화

### 13.3 스타일링

- Tailwind CSS: 빠른 개발, 일관성
- CSS Modules: 스타일 격리
- Styled Components 배제: 번들 크기

## 14. 확장 가능성

### 14.1 기능 확장

- 소셜 기능 (친구와 비교)
- AI 기반 섭취 패턴 분석
- 건강 앱 연동

### 14.2 플랫폼 확장

- React Native 모바일 앱
- 데스크톱 앱 (Electron)
- 브라우저 확장 프로그램

### 14.3 비즈니스 확장

- 프리미엄 기능
- 기업용 버전
- API 제공

## 15. 성공 지표

### 15.1 기술적 지표

- 초기 로딩: 3초 이내
- Lighthouse 점수: 90점 이상
- 번들 크기: 500KB 이하

### 15.2 사용성 지표

- 일일 활성 사용자
- 평균 세션 시간
- 기능 사용률

### 15.3 비즈니스 지표

- 사용자 만족도
- 리텐션율
- 추천 의향
